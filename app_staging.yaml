runtime: custom
env: flex

service: surveys-backend-staging
env_variables:
  DATABASE_URL:
  EMAIL_VERIFICATION_DISABLED:
  ENCRYPTION_KEY:
  NEXTAUTH_SECRET:
  NEXTAUTH_URL:
  PASSWORD_RESET_DISABLED:
  POSTGRES_PASSWORD:
  WEBAPP_URL:
  NEXT_PUBLIC_SENTRY_DSN:
  NEXT_PUBLIC_SENTRY_KEY: d2b4b79101c8beb90569b5be2a8852dd
  SIGNUP_RATE_LIMIT_INTERVAL: 1000
  SIGNUP_RATE_LIMIT_ALLOWED: 1000
  LOGIN_RATE_LIMIT_INTERVAL: 1000
  LOGIN_RATE_LIMIT_ALLOWED: 1000
  CLIENT_RATE_LIMIT_INTERVAL: 1000
  CLIENT_RATE_LIMIT_ALLOWED: 1000
  SHARE_RATE_LIMIT_INTERVAL: 1000
  SHARE_RATE_LIMIT_ALLOWED: 1000
  SYNC_USER_IDENTIFICATION_RATE_LIMIT_INTERVAL: 1000
  SYNC_USER_IDENTIFICATION_RATE_LIMIT_ALLOWED: 1000

automatic_scaling:
  min_num_instances: 1
  max_num_instances: 8

network:
  name: anecdote-vpc
  subnetwork_name: public-us-east1-2

resources:
  cpu: 8
  memory_gb: 32
  disk_size_gb: 128
